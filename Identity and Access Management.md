**🎥 شرح فيديو IAM: "الهوية وإدارة الوصول في AWS – كل ما تحتاج معرفته"**
*(بأسلوب مصري بسيط + أمثلة عملية + نصائح مهمة)*

---

## **🔐 1. ما هو IAM؟**
- **IAM** اختصار لـ **Identity and Access Management** (الهوية وإدارة الوصول).
- **خدمة عالمية** (Global Service) → لا تعتمد على ريجيون معين.
- **وظيفتها:** التحكم في **من يمكنه الوصول إلى حساب AWS** وما هي **الصلاحيات الممنوحة له**.

**📌 مثال:**
- لو عندك شركة فيها 6 موظفين، **IAM** هو اللي بيحدد:
  - أي موظف يقدر يشتغل على إيه؟
  - أي موظف يقدر يشغل سيرفرات (EC2)؟
  - أي موظف يقدر يعدل قاعدة البيانات (RDS)؟

---

## **👤 2. أنواع المستخدمين في IAM**
### **أ. حساب Root (الجذر)**
- **بيتم إنشاؤه تلقائيًا** عند إنشاء حساب AWS.
- **استخداماته الوحيدة:**
  1. **إعداد الحساب لأول مرة** (مثال: إنشاء مستخدمين جدد).
  2. **إلغاء تفعيل الحساب** في حالة الطوارئ.
- **⚠️ تحذير:**
  - **لا تستخدمه أبدًا في العمل اليومي!**
  - **لا تشاركه مع أحد!** (خطر أمني كبير!)

### **ب. المستخدمين (Users)**
- **كل شخص في فريقك يجب أن يكون له مستخدم مستقل**.
- **مثال:** إذا كان عندك فريق مكون من:
  - **Alice, Bob, Charles** (مطورين)
  - **David, Edward** (فريق العمليات)
  - **Fred** (مدقق وحيد)
  → كل واحد منهم يجب أن يكون له **مستخدم مستقل** في IAM.

---

## **👥 3. المجموعات (Groups)**
- **المجموعة** هي طريقة لتجميع المستخدمين الذين لديهم **نفس الصلاحيات**.
- **قواعد المجموعات:**
  - المجموعة تحتوي على **مستخدمين فقط** (مش مجموعات تانية).
  - **مستخدم واحد يمكن أن يكون في أكثر من مجموعة**.
  - **أفضل ممارسة:** كل مستخدم يجب أن يكون في **مجموعة على الأقل**.

**📌 مثال:**
| مجموعة | المستخدمين |
|---------|-------------|
| **Developers** | Alice, Bob, Charles |
| **Operations** | David, Edward |
| **Audit** | Charles, David |

**لماذا Charles وDavid في مجموعتين؟**
- لأنهم يعملون في **فريقين مختلفين** (تطوير وعمليات)، وكل فريق له صلاحيات مختلفة.

---

## **📜 4. صلاحيات المستخدمين (Policies)**
- **الـ Policy** هو **وثيقة JSON** تحدد **ما يمكن للمستخدم أو المجموعة فعله**.
- **مثال لسياسة (Policy):**
  ```json
  {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Effect": "Allow",
        "Action": [
          "ec2:Describe*",       // يسمح بمشاهدة سيرفرات EC2
          "elasticloadbalancing:Describe*",  // يسمح بمشاهدة Load Balancers
          "cloudwatch:GetMetricStatistics"  // يسمح بمشاهدة بيانات CloudWatch
        ],
        "Resource": "*"  // تطبق على جميع الموارد
      }
    ]
  }
  ```
- **معنى السياسة دي:**
  - المستخدم أو المجموعة المخصص لها هذه السياسة **يمكنهم:**
    - مشاهدة سيرفرات **EC2**.
    - مشاهدة **Load Balancers**.
    - مشاهدة بيانات **CloudWatch**.
  - **ممنوع عليهم** فعل أي شيء آخر (مثال: إنشاء سيرفر جديد).

---

## **🔒 5. مبدأ الأقل صلاحية (Least Privilege Principle)**
- **لا تعطي صلاحيات أكثر من اللازم!**
- **مثال:**
  - إذا كان **Fred** مدقق فقط، **لا تعطيه صلاحية إنشاء سيرفرات**!
  - إذا كان **Alice** مطورة، **لا تعطيها صلاحية حذف قواعد البيانات**!

**💡 لماذا هذا مهم؟**
- **الأمان:** تقليل خطر الاختراقات.
- **التكلفة:** منع المستخدمين من تشغيل خدمات غالية بدون داعي.

---

## **🎯 6. كيف تنشئ مستخدمين ومجموعات في IAM؟**
### **خطوات إنشاء مستخدم:**
1. ادخل إلى **IAM Console** من واجهة AWS.
2. اختر **Users** → **Add user**.
3. أدخل **اسم المستخدم** (مثال: `Alice`).
4. اختر **نوع الوصول**:
   - **Programmatic access** (للوصول عبر API أو CLI).
   - **AWS Management Console access** (للوصول عبر الواجهة الرسومية).
5. **ضبط صلاحيات المستخدم**:
   - **أفضل طريقة:** أضف المستخدم إلى **مجموعة** لها صلاحيات محددة.
   - **بديل:** ربط **Policy** مباشرة بالمستخدم.

### **خطوات إنشاء مجموعة:**
1. اختر **Groups** → **Create New Group**.
2. أدخل **اسم المجموعة** (مثال: `Developers`).
3. اختر **السياسات (Policies)** المناسبة (مثال: `AmazonEC2ReadOnlyAccess`).
4. أضف **المستخدمين** إلى المجموعة.

---

## **📌 مثال عملي:**
**لو عندك فريق تطوير:**
1. أنشئ مجموعة باسم **Developers**.
2. ربط بها سياسة تسمح بـ:
   - مشاهدة وإنشاء سيرفرات **EC2**.
   - الوصول إلى **S3** لمشروع معين.
3. أضف **Alice, Bob, Charles** إلى المجموعة.

**النتيجة:**
- كل مطور في المجموعة يقدر **يشغل ويرى السيرفرات** بدون الحاجة لإعطاء كل مستخدم صلاحيات منفصلة.

---

## **⚠️ أخطاء شائعة يجب تجنبها**
1. **استخدام حساب Root للعمل اليومي** → **خطر كبير!**
2. **إعطاء صلاحيات Admin لكل المستخدمين** → **غير آمن!**
3. **نسيان حذف المستخدمين الذين غادروا الشركة** → **ثغرة أمنية!**
4. **عدم مراجعة صلاحيات المستخدمين بانتظام** → قد يؤدي إلى وصول غير مصرح به.

---

## **💬 سؤال لك:**
- إذا كان عندك **مستخدم جديد** في فريق الدعم الفني، أي **صلاحيات** هتعطيه؟ وليه؟
  *(مثال: هعطيه صلاحية قراءة السيرفرات (EC2ReadOnly) ووصول إلى لوغات CloudWatch فقط.)*

---
**هل تريد أن نطبق معًا إنشاء مستخدم ومجموعة في IAM؟**
- ممكن نبدأ بـ **إنشاء مستخدم جديد** وربطه بمجموعة **Developers**!
- أو نناقش **كيفية كتابة Policy مخصصة** لمشروعك؟ 🚀

===================

**🎥 شرح فيديو: "إنشاء مستخدم ومجموعة في IAM – تطبيق عملي خطوة بخطوة"**
*(بأسلوب مصري بسيط + صور توضيحية + نصائح مهمة)*

---

## **🔍 1. دخول إلى واجهة IAM**
- **طريقة الوصول:**
  - من شريط البحث في AWS، اكتب **"IAM"** → اضغط على **IAM Console**.
- **ملاحظة مهمة:**
  - **IAM خدمة عالمية** (Global) → لا تعتمد على ريجيون.
  - ستجد في الأعلى يمين **"Global"** بدلاً من اسم ريجيون.

---

## **👤 2. إنشاء مستخدم جديد (User)**
### **خطوات إنشاء المستخدم:**
1. من القائمة اليسرى، اختر **"Users"** → **"Add user"**.
2. أدخل **اسم المستخدم** (مثال: `Eslam`).
3. اختر **نوع الوصول:**
   - **AWS Management Console access** (للوصول عبر الواجهة الرسومية).
   - **Programmatic access** (للوصول عبر API أو CLI – اختياري).
4. **ضبط كلمة المرور:**
   - **للمستخدمين الآخرين:** اختر **"Auto-generated password"** واطلب منهم تغييرها عند أول دخول.
   - **لنفسك:** أدخل **كلمة مرور مخصصة** ولا تفعّل خيار تغييرها عند أول دخول.
5. اضغط **"Next"**.

---

## **👥 3. إنشاء مجموعة (Group) وربط المستخدم بها**
### **خطوات إنشاء المجموعة:**
1. في صفحة **"Set permissions"**, اختر **"Create group"**.
2. أدخل **اسم المجموعة** (مثال: `Admins`).
3. اختر **السياسات (Policies)**:
   - ابحث عن **"AdministratorAccess"** → اخترها (هذه السياسة تعطي صلاحيات إدارية كاملة).
4. اضغط **"Create group"**.
5. **ربط المستخدم بالمجموعة:**
   - اضغط على المجموعة الجديدة (`Admins`) → اضف المستخدم (`Eslam`) إليها.
6. اضغط **"Next"** → **"Create user"**.

**📌 لماذا نستخدم المجموعات؟**
- **تسهيل إدارة الصلاحيات:** بدلاً من إعطاء كل مستخدم صلاحيات منفصلة، نضعهم في مجموعة واحدة.
- **مثال:** إذا كان عندك 10 مطورين، ضعهم في مجموعة `Developers` وربطها بسياسة `AmazonEC2FullAccess`.

---

## **🏷️ 4. إضافة Tags (اختياري)**
- **الـ Tags** هي **بيانات وصفية** تساعد في تنظيم الموارد.
- **مثال:**
  - **Key:** `Department`
  - **Value:** `Engineering`
- **ملاحظة:** التاجز اختياري ولكن مفيد في المشاريع الكبيرة.

---

## **🔑 5. تسجيل الدخول بالمستخدم الجديد**
### **خطوات تسجيل الدخول:**
1. بعد إنشاء المستخدم، ستظهر لك **Sign-in URL** (رابط تسجيل الدخول).
   - مثال: `https://123456789012.signin.aws.amazon.com/console`
2. **تخصيص الرابط (اختياري):**
   - من **IAM Dashboard** → **"Customize"** → أنشئ **Account Alias** (مثال: `eslam-aws`).
   - يصبح الرابط: `https://eslam-aws.signin.aws.amazon.com/console`
3. **تسجيل الدخول:**
   - افتح نافذة متصفح جديدة (**Private/Incognito Mode**).
   - أدخل **اسم المستخدم** (`Eslam`) و**كلمة المرور**.
   - **نصيحة:** استخدم نافذة خاصة حتى تتمكن من فتح حساب Root وIAM User في نفس الوقت.

**💡 لماذا نستخدم نافذة خاصة؟**
- لتجنب تسجيل الخروج من حساب **Root** عند تسجيل دخول المستخدم الجديد.

---

## **🔒 6. الفرق بين حساب Root والمستخدم الجديد**
| **حساب Root** | **مستخدم IAM** |
|---------------|----------------|
| له صلاحيات كاملة على الحساب. | صلاحياته تعتمد على المجموعة أو السياسات المربوطة به. |
| **لا يجب استخدامه إلا لإدارة الحساب.** | **يستخدم للعمل اليومي.** |
| لا يمكن تقييد صلاحياته. | يمكن تقييد صلاحياته بواسطة Policies. |

**⚠️ تحذير:**
- **لا تفقد بيانات تسجيل دخول Root أو Admin!**
- إذا فقدتها، ستحتاج إلى الاتصال بـ **دعم AWS** لاستعادة الوصول.

---

## **📌 مثال عملي:**
**لو عندك فريق دعم فني:**
1. أنشئ مجموعة باسم `Support`.
2. ربطها بسياسة `AWSSupportAccess`.
3. أضف المستخدمين (`Ahmed`, `Mona`) إلى المجموعة.
4. الآن، كل عضو في الفريق يقدر **فتح تذاكر الدعم** بدون صلاحيات إضافية.

---

## **💬 سؤال لك:**
- إذا كنت تريد إنشاء **مستخدم لمطور** مع صلاحيات محدودة، أي **سياسات** هتربطها به؟
  *(مثال: `AmazonEC2FullAccess` + `AmazonS3ReadOnlyAccess`.)*

---
**هل تريد أن نطبق معًا إنشاء مستخدم آخر مع صلاحيات مخصصة؟**
- مثال: **مستخدم لمدقق** مع صلاحية قراءة فقط (`ReadOnlyAccess`).
- أو نناقش **كيفية إنشاء Policy مخصصة** لمشروعك؟ 🚀
================

**🎥 شرح فيديو IAM Policies: "كيف تعمل صلاحيات المستخدمين في AWS – تطبيق عملي"**
*(بأسلوب مصري بسيط + أمثلة حية + نصائح مهمة)*

---

## **🔐 1. مقدمة عن صلاحيات IAM**
- **IAM Policies** هي **قواعد** تحدد **ما يمكن للمستخدم أو المجموعة فعله** في AWS.
- يمكن ربط السياسات **بالمستخدمين مباشرة** أو **من خلال المجموعات**.
- **مثال:** إذا كان المستخدم في مجموعة **Admin**، فهو لديه صلاحيات كاملة.

---

## **📌 2. تجربة عملية: إزالة صلاحيات المستخدم**
### **خطوة 1: إزالة المستخدم من مجموعة Admin**
- في الفيديو، **Stephane** كان في مجموعة **Admin** → لديه صلاحيات كاملة.
- بعد **إزالته من المجموعة**:
  - **فقد صلاحيات مشاهدة المستخدمين** (`iam:ListUsers`).
  - ظهر له خطأ **"Access Denied"** عند محاولة فتح قائمة المستخدمين.

**💡 الدرس:**
- **الصلاحيات ترث من المجموعات** → إذا خرجت من مجموعة، تفقد صلاحياتها.

---

## **🔄 3. كيفية استعادة صلاحيات المستخدم**
### **خطوة 2: إضافة سياسة مباشرة للمستخدم**
- تم إضافة سياسة **IAMReadOnlyAccess** للمستخدم **Stephane** مباشرة.
- **النتيجة:**
  - أصبح يمكن لمستخدم **Stephane** **مشاهدة** المستخدمين والمجموعات، ولكن **لا يمكن إنشاء** أي شيء.
  - **مثال:** حاول إنشاء مجموعة جديدة (`developers`) → **فشل** لأن السياسة تسمح بالقراءة فقط.

**📌 ملاحظة:**
- **IAMReadOnlyAccess** تسمح بـ:
  - مشاهدة المستخدمين (`iam:ListUsers`).
  - مشاهدة المجموعات (`iam:ListGroups`).
  - **لا تسمح** بإنشاء أو تعديل أي شيء.

---

## **👥 4. إنشاء مجموعة جديدة وربط المستخدم بها**
### **خطوة 3: إنشاء مجموعة Developers**
- تم إنشاء مجموعة جديدة باسم **developers**.
- تم إضافة مستخدم **Stephane** إلى المجموعة.
- تم ربط سياسة عشوائية (`AlexaForBusiness`) بالمجموعة (لمجرد التوضيح).

**💡 الدرس:**
- المستخدم يمكن أن يكون في **أكثر من مجموعة**.
- **الصلاحيات تراكمية** → المستخدم يرث صلاحيات جميع المجموعات التي ينتمي إليها.

---

## **📜 5. تحليل سياسات IAM**
### **أ. سياسة AdministratorAccess**
- **JSON:**
  ```json
  {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Effect": "Allow",
        "Action": "*",
        "Resource": "*"
      }
    ]
  }
  ```
- **معنى السياسة:**
  - **"Action": "*"** → يسمح بكل الأفعال.
  - **"Resource": "*"** → على كل الموارد.
  - **النتيجة:** صلاحيات كاملة على كل خدمات AWS.

### **ب. سياسة IAMReadOnlyAccess**
- **JSON:**
  ```json
  {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Effect": "Allow",
        "Action": [
          "iam:List*",
          "iam:Get*"
        ],
        "Resource": "*"
      }
    ]
  }
  ```
- **معنى السياسة:**
  - **"iam:List*"** → يسمح بمشاهدة كل القوائم (مثال: `iam:ListUsers`).
  - **"iam:Get*"** → يسمح باسترجاع معلومات (مثال: `iam:GetUser`).
  - **لا يسمح** بإنشاء أو تعديل أو حذف.

**💡 نصيحة:**
- استخدم **`*`** للدلالة على كل شيء (مثال: `iam:*` لكل أفعال IAM).
- استخدم **`List*`** أو **`Get*`** للسماح بأفعال محددة.

---

## **✍️ 6. إنشاء سياسة مخصصة**
### **خطوة 4: إنشاء سياسة جديدة باستخدام Visual Editor**
1. ادخل إلى **IAM → Policies → Create Policy**.
2. اختر **Visual Editor**.
3. اختر الخدمة (**IAM**).
4. اختر الأفعال (**ListUsers**, **GetUser**).
5. اختر الموارد (**All resources**).
6. أعط السياسة اسمًا (مثال: **MyIAMPermissions**).
7. انشئ السياسة.

**📌 مثال للسياسة الجديدة:**
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "iam:ListUsers",
        "iam:GetUser"
      ],
      "Resource": "*"
    }
  ]
}
```

**💡 الدرس:**
- **Visual Editor** يسهل إنشاء السياسات بدون كتابة JSON يدويًا.
- يمكن استخدام **JSON Editor** إذا كنت تريد تحكمًا دقيقًا.

---

## **🔄 7. إدارة صلاحيات المستخدم النهائي**
- بعد إضافة **Stephane** مرة أخرى إلى مجموعة **Admin**:
  - أصبح لديه **صلاحيات كاملة** مرة أخرى.
  - بالإضافة إلى صلاحيات المجموعة **developers** والسياسة المباشرة **IAMReadOnlyAccess**.
- **النتيجة النهائية:**
  - المستخدم **Stephane** لديه:
    1. صلاحيات **Admin** (من مجموعة Admin).
    2. صلاحيات **AlexaForBusiness** (من مجموعة developers).
    3. صلاحيات **IAMReadOnlyAccess** (مربوطة مباشرة).

**⚠️ تحذير:**
- **التكرار في الصلاحيات** قد يسبب ارتباكًا → أفضل ممارسة هي **استخدام المجموعات** بدلاً من ربط السياسات مباشرة بالمستخدمين.

---

## **🎯 8. أفضل الممارسات في إدارة صلاحيات IAM**
1. **لا تعط صلاحيات Admin إلا للضرورة القصوى**.
2. **استخدم المجموعات** لتبسيط إدارة الصلاحيات.
3. **راجع صلاحيات المستخدمين بانتظام** وحذف ما لا يحتاجونه.
4. **استخدم مبدأ الأقل صلاحية (Least Privilege)** → أعط فقط ما يحتاجه المستخدم للقيام بعمله.

---

## **💬 سؤال لك:**
- إذا كان عندك **مستخدم جديد** في فريق الدعم الفني، أي **سياسة** هتعطيه؟ ولماذا؟
  *(مثال: هعطيه `IAMReadOnlyAccess` + `EC2ReadOnlyAccess` حتى يستطيع مشاهدة السيرفرات والمستخدمين بدون تعديل.)*

---
**هل تريد أن نطبق معًا إنشاء سياسة مخصصة لمشروعك؟**
- ممكن نناقش **كيفية كتابة سياسة** تسمح للمستخدمين بقراءة وتعديل **S3 Buckets** معينة فقط! 🚀
